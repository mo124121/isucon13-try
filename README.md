# isucon13-try
isucon13を構成管理をものすごい勢いでやるトライアル


## 想定手順

メモ
コンテスト初動の構成管理、ベンチ体制構築手順をずっと検討中

過去問環境だとベンチやansibleやdockerなどいい感じのものがあるが、本番はなさそう

特にベンチがないのが厳しく、観測は運営側のリソースに頼らざるを得ない他、並列実行も厳しい可能性が高い

あまり複数の環境を作る意味がないので、テンプレで作成される環境を開発環境、本番環境として利用する


デプロイの戦略
あるブランチの状態=サーバー群の状態とした上でベンチを走らせる
あるコミットとベンチの対応関係を紐づける
ベンチのトリガーが自動化できるならブランチへのプッシュをトリガーにベンチを走らせてもいい(無理ならinitializeに仕込む？嫌な予感するー)

構成の管理
事前に存在するであろうサーバー内の永続化データを取り出す部分を除き、IaC化しておく
アプリコード→git chechoutとビルド
設定ファイル→git checkoutとシンボリックリンク
DBの設定(インデックスなど)→CDで気合いで書く？わからん、ここは知識がない

手元環境
IaCを行おうとするとそれはそれでとてもしんどくなることが予想されるので、簡易的に動かせる環境があると良い
docker composeとcodespaces あたりか

デプロイ周りのツール
github actionsとansible

## 初動の動き
・SQL dumpしてデータベースの吸い出し(与えられるならしなくていい) -> 不要そう

・アプリソースを中心としたソースコードのgit移設

・デプロイ用ansible playbookの実装

・デプロイ用のgithub actionsの実装

## ソースコードの確保


## SSH接続

ssh -i ~/.ssh/codespace.pem -o ServerAliveInterval=50 ubuntu@XXX

## メモ

### powerdnsの初期化

データベースのスキーマが存在してるっぽい
